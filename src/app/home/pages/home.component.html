<main>
  <div class="container" *ngIf="memes.length > 0; else title">
    <h1 class="text-center">Últimos memes creados</h1>
    <app-paginated-list 
      [items]="memes"
      [currentPage]="currentPage"
      [itemsPerPage]="itemsPerPage"
      class="row row-cols-1 row-cols-sm-2 row-cols-md-4 my-5">
        <ng-template #item let-item="item">
          <a class="my-2" [routerLink]="['/view', item.id]"><app-meme-image [meme]="item"></app-meme-image></a>
        </ng-template>
    </app-paginated-list>
    <app-pagination
      *ngIf="memes.length > itemsPerPage"
      [itemsLength]="memes.length"
      [itemsPerPage]="itemsPerPage"
      [currentPage]="currentPage"
      (pageChanged)="currentPage=$event">
    </app-pagination>
  </div>
  <ng-template #title>
    <div class="text-center">
      <h1 class="my-5">Bienvenido a Meme Creator</h1>
      <p *ngIf="!(auth.isAuthenticated$ | async); else logged">Inicia sesion para crear memes</p>
      <ng-template #logged>
        <p *ngIf="auth.user$|async as user">Bienvenido {{user.family_name ?? user.name}}, ¡ya puedes <a class="link" routerLink="/create">crear memes</a>!</p>
      </ng-template>
    </div>
  </ng-template>
</main>
